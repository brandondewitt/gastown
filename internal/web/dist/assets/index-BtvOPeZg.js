(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();const Hn=!1;var Zn=Array.isArray,Vr=Array.prototype.indexOf,Mn=Array.from,Gr=Object.defineProperty,pn=Object.getOwnPropertyDescriptor,Ds=Object.getOwnPropertyDescriptors,zr=Object.prototype,Yr=Array.prototype,Qn=Object.getPrototypeOf,bs=Object.isExtensible;function Kr(e){return e()}function Bn(e){for(var t=0;t<e.length;t++)e[t]()}function Ns(){var e,t,n=new Promise((s,r)=>{e=s,t=r});return{promise:n,resolve:e,reject:t}}const te=2,Os=4,Dn=8,Jr=1<<24,wt=16,bt=32,Kt=64,Nn=128,ze=512,ve=1024,ye=2048,it=4096,Te=8192,It=16384,es=32768,nn=65536,qs=1<<17,Ps=1<<18,on=1<<19,Fs=1<<20,Rt=1<<25,Gt=32768,Vn=1<<21,ts=1<<22,Mt=1<<23,hn=Symbol("$state"),Qt=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Xr(e){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Zr(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function Qr(e){throw new Error("https://svelte.dev/e/effect_in_teardown")}function ea(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ta(e){throw new Error("https://svelte.dev/e/effect_orphan")}function na(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function sa(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function ra(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function aa(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function ia(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const oa=1,la=2,ca=16,va=1,fa=2,ce=Symbol(),ua="http://www.w3.org/1999/xhtml";function da(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Ls(e){return e===this.v}function _a(e,t){return e!=e?t==t:e!==t||e!==null&&typeof e=="object"||typeof e=="function"}function js(e){return!_a(e,this.v)}let bn=!1,pa=!1;function ha(){bn=!0}let B=null;function sn(e){B=e}function Ws(e,t=!1,n){B={p:B,i:!1,c:null,e:null,s:e,x:null,l:bn&&!t?{s:null,u:null,$:[]}:null}}function $s(e){var t=B,n=t.e;if(n!==null){t.e=null;for(var s of n)nr(s)}return t.i=!0,B=t.p,{}}function qn(){return!bn||B!==null&&B.l===null}let en=[];function ma(){var e=en;en=[],Bn(e)}function On(e){if(en.length===0){var t=en;queueMicrotask(()=>{t===en&&ma()})}en.push(e)}function Us(e){var t=M;if(t===null)return A.f|=Mt,e;if((t.f&es)===0){if((t.f&Nn)===0)throw e;t.b.error(e)}else rn(e,t)}function rn(e,t){for(;t!==null;){if((t.f&Nn)!==0)try{t.b.error(e);return}catch(n){e=n}t=t.parent}throw e}const An=new Set;let W=null,Pe=null,st=[],ns=null,Gn=!1;class rt{committed=!1;current=new Map;previous=new Map;#e=new Set;#t=new Set;#s=0;#n=0;#l=null;#a=new Set;#r=new Set;skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(t){st=[],this.apply();var n={parent:null,effect:null,effects:[],render_effects:[]};for(const s of t)this.#i(s,n);this.is_fork||this.#v(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects)):(W=null,xs(n.render_effects),xs(n.effects),this.#l?.resolve()),Pe=null}#i(t,n){t.f^=ve;for(var s=t.first;s!==null;){var r=s.f,a=(r&(bt|Kt))!==0,c=a&&(r&ve)!==0,l=c||(r&Te)!==0||this.skipped_effects.has(s);if((s.f&Nn)!==0&&s.b?.is_pending()&&(n={parent:n,effect:s,effects:[],render_effects:[]}),!l&&s.fn!==null){a?s.f^=ve:(r&Os)!==0?n.effects.push(s):kn(s)&&((s.f&wt)!==0&&this.#a.add(s),wn(s));var f=s.first;if(f!==null){s=f;continue}}var v=s.parent;for(s=s.next;s===null&&v!==null;)v===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),n=n.parent),s=v.next,v=v.parent}}#o(t){for(const n of t)(n.f&ye)!==0?this.#a.add(n):(n.f&it)!==0&&this.#r.add(n),this.#c(n.deps),fe(n,ve)}#c(t){if(t!==null)for(const n of t)(n.f&te)===0||(n.f&Gt)===0||(n.f^=Gt,this.#c(n.deps))}capture(t,n){this.previous.has(t)||this.previous.set(t,n),(t.f&Mt)===0&&(this.current.set(t,t.v),Pe?.set(t,t.v))}activate(){W=this,this.apply()}deactivate(){W===this&&(W=null,Pe=null)}flush(){if(this.activate(),st.length>0){if(ga(),W!==null&&W!==this)return}else this.#s===0&&this.process([]);this.deactivate()}discard(){for(const t of this.#t)t(this);this.#t.clear()}#v(){if(this.#n===0){for(const t of this.#e)t();this.#e.clear()}this.#s===0&&this.#f()}#f(){if(An.size>1){this.previous.clear();var t=Pe,n=!0,s={parent:null,effect:null,effects:[],render_effects:[]};for(const a of An){if(a===this){n=!1;continue}const c=[];for(const[f,v]of this.current){if(a.current.has(f))if(n&&v!==a.current.get(f))a.current.set(f,v);else continue;c.push(f)}if(c.length===0)continue;const l=[...a.current.keys()].filter(f=>!this.current.has(f));if(l.length>0){var r=st;st=[];const f=new Set,v=new Map;for(const d of c)Hs(d,l,f,v);if(st.length>0){W=a,a.apply();for(const d of st)a.#i(d,s);a.deactivate()}st=r}}W=null,Pe=t}this.committed=!0,An.delete(this)}increment(t){this.#s+=1,t&&(this.#n+=1)}decrement(t){this.#s-=1,t&&(this.#n-=1),this.revive()}revive(){for(const t of this.#a)this.#r.delete(t),fe(t,ye),zt(t);for(const t of this.#r)fe(t,it),zt(t);this.flush()}oncommit(t){this.#e.add(t)}ondiscard(t){this.#t.add(t)}settled(){return(this.#l??=Ns()).promise}static ensure(){if(W===null){const t=W=new rt;An.add(W),rt.enqueue(()=>{W===t&&t.flush()})}return W}static enqueue(t){On(t)}apply(){}}function ga(){var e=Bt;Gn=!0;var t=null;try{var n=0;for(Rn(!0);st.length>0;){var s=rt.ensure();if(n++>1e3){var r,a;ya()}s.process(st),Dt.clear()}}finally{Gn=!1,Rn(e),ns=null}}function ya(){try{na()}catch(e){rn(e,ns)}}let gt=null;function xs(e){var t=e.length;if(t!==0){for(var n=0;n<t;){var s=e[n++];if((s.f&(It|Te))===0&&kn(s)&&(gt=new Set,wn(s),s.deps===null&&s.first===null&&s.nodes===null&&(s.teardown===null&&s.ac===null?ar(s):s.fn=null),gt?.size>0)){Dt.clear();for(const r of gt){if((r.f&(It|Te))!==0)continue;const a=[r];let c=r.parent;for(;c!==null;)gt.has(c)&&(gt.delete(c),a.push(c)),c=c.parent;for(let l=a.length-1;l>=0;l--){const f=a[l];(f.f&(It|Te))===0&&wn(f)}}gt.clear()}}gt=null}}function Hs(e,t,n,s){if(!n.has(e)&&(n.add(e),e.reactions!==null))for(const r of e.reactions){const a=r.f;(a&te)!==0?Hs(r,t,n,s):(a&(ts|wt))!==0&&(a&ye)===0&&Bs(r,t,s)&&(fe(r,ye),zt(r))}}function Bs(e,t,n){const s=n.get(e);if(s!==void 0)return s;if(e.deps!==null)for(const r of e.deps){if(t.includes(r))return!0;if((r.f&te)!==0&&Bs(r,t,n))return n.set(r,!0),!0}return n.set(e,!1),!1}function zt(e){for(var t=ns=e;t.parent!==null;){t=t.parent;var n=t.f;if(Gn&&t===M&&(n&wt)!==0&&(n&Ps)===0)return;if((n&(Kt|bt))!==0){if((n&ve)===0)return;t.f^=ve}}st.push(t)}function wa(e){let t=0,n=Yt(0),s;return()=>{gn()&&(i(n),Pa(()=>(t===0&&(s=Pn(()=>e(()=>mn(n)))),t+=1,()=>{On(()=>{t-=1,t===0&&(s?.(),s=void 0,mn(n))})})))}}var ba=nn|on|Nn;function qa(e,t,n){new xa(e,t,n)}class xa{parent;#e=!1;#t;#s=null;#n;#l;#a;#r=null;#i=null;#o=null;#c=null;#v=null;#f=0;#u=0;#_=!1;#d=null;#y=wa(()=>(this.#d=Yt(this.#f),()=>{this.#d=null}));constructor(t,n,s){this.#t=t,this.#n=n,this.#l=s,this.parent=M.b,this.#e=!!this.#n.pending,this.#a=is(()=>{M.b=this;{var r=this.#m();try{this.#r=Oe(()=>s(r))}catch(a){this.error(a)}this.#u>0?this.#h():this.#e=!1}return()=>{this.#v?.remove()}},ba)}#w(){try{this.#r=Oe(()=>this.#l(this.#t))}catch(t){this.error(t)}this.#e=!1}#b(){const t=this.#n.pending;t&&(this.#i=Oe(()=>t(this.#t)),rt.enqueue(()=>{var n=this.#m();this.#r=this.#p(()=>(rt.ensure(),Oe(()=>this.#l(n)))),this.#u>0?this.#h():(Ht(this.#i,()=>{this.#i=null}),this.#e=!1)}))}#m(){var t=this.#t;return this.#e&&(this.#v=Nt(),this.#t.before(this.#v),t=this.#v),t}is_pending(){return this.#e||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(t){var n=M,s=A,r=B;ot(this.#a),me(this.#a),sn(this.#a.ctx);try{return t()}catch(a){return Us(a),null}finally{ot(n),me(s),sn(r)}}#h(){const t=this.#n.pending;this.#r!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#v),lr(this.#r,this.#c)),this.#i===null&&(this.#i=Oe(()=>t(this.#t)))}#g(t){if(!this.has_pending_snippet()){this.parent&&this.parent.#g(t);return}this.#u+=t,this.#u===0&&(this.#e=!1,this.#i&&Ht(this.#i,()=>{this.#i=null}),this.#c&&(this.#t.before(this.#c),this.#c=null))}update_pending_count(t){this.#g(t),this.#f+=t,this.#d&&an(this.#d,this.#f)}get_effect_pending(){return this.#y(),i(this.#d)}error(t){var n=this.#n.onerror;let s=this.#n.failed;if(this.#_||!n&&!s)throw t;this.#r&&(ge(this.#r),this.#r=null),this.#i&&(ge(this.#i),this.#i=null),this.#o&&(ge(this.#o),this.#o=null);var r=!1,a=!1;const c=()=>{if(r){da();return}r=!0,a&&ia(),rt.ensure(),this.#f=0,this.#o!==null&&Ht(this.#o,()=>{this.#o=null}),this.#e=this.has_pending_snippet(),this.#r=this.#p(()=>(this.#_=!1,Oe(()=>this.#l(this.#t)))),this.#u>0?this.#h():this.#e=!1};var l=A;try{me(null),a=!0,n?.(t,c),a=!1}catch(f){rn(f,this.#a&&this.#a.parent)}finally{me(l)}s&&On(()=>{this.#o=this.#p(()=>{rt.ensure(),this.#_=!0;try{return Oe(()=>{s(this.#t,()=>t,()=>c)})}catch(f){return rn(f,this.#a.parent),null}finally{this.#_=!1}})})}}function ka(e,t,n,s){const r=qn()?ss:Vs;if(n.length===0&&e.length===0){s(t.map(r));return}var a=W,c=M,l=Ea();function f(){Promise.all(n.map(v=>Sa(v))).then(v=>{l();try{s([...t.map(r),...v])}catch(d){(c.f&It)===0&&rn(d,c)}a?.deactivate(),Tn()}).catch(v=>{rn(v,c)})}e.length>0?Promise.all(e).then(()=>{l();try{return f()}finally{a?.deactivate(),Tn()}}):f()}function Ea(){var e=M,t=A,n=B,s=W;return function(a=!0){ot(e),me(t),sn(n),a&&s?.activate()}}function Tn(){ot(null),me(null),sn(null)}function ss(e){var t=te|ye,n=A!==null&&(A.f&te)!==0?A:null;return M!==null&&(M.f|=on),{ctx:B,deps:null,effects:null,equals:Ls,f:t,fn:e,reactions:null,rv:0,v:ce,wv:0,parent:n??M,ac:null}}function Sa(e,t){let n=M;n===null&&Zr();var s=n.b,r=void 0,a=Yt(ce),c=!A,l=new Map;return Oa(()=>{var f=Ns();r=f.promise;try{Promise.resolve(e()).then(f.resolve,f.reject).then(()=>{v===W&&v.committed&&v.deactivate(),Tn()})}catch(p){f.reject(p),Tn()}var v=W;if(c){var d=!s.is_pending();s.update_pending_count(1),v.increment(d),l.get(v)?.reject(Qt),l.delete(v),l.set(v,f)}const y=(p,w=void 0)=>{if(v.activate(),w)w!==Qt&&(a.f|=Mt,an(a,w));else{(a.f&Mt)!==0&&(a.f^=Mt),an(a,p);for(const[h,j]of l){if(l.delete(h),h===v)break;j.reject(Qt)}}c&&(s.update_pending_count(-1),v.decrement(d))};f.promise.then(y,p=>y(null,p||"unknown"))}),tr(()=>{for(const f of l.values())f.reject(Qt)}),new Promise(f=>{function v(d){function y(){d===r?f(a):v(r)}d.then(y,y)}v(r)})}function Vs(e){const t=ss(e);return t.equals=js,t}function Gs(e){var t=e.effects;if(t!==null){e.effects=null;for(var n=0;n<t.length;n+=1)ge(t[n])}}function Aa(e){for(var t=e.parent;t!==null;){if((t.f&te)===0)return(t.f&It)===0?t:null;t=t.parent}return null}function rs(e){var t,n=M;ot(Aa(e));try{e.f&=~Gt,Gs(e),t=ur(e)}finally{ot(n)}return t}function zs(e){var t=rs(e);if(e.equals(t)||(W?.is_fork||(e.v=t),e.wv=vr()),!ln)if(Pe!==null)(gn()||W?.is_fork)&&Pe.set(e,t);else{var n=(e.f&ze)===0?it:ve;fe(e,n)}}let zn=new Set;const Dt=new Map;let Ys=!1;function Yt(e,t){var n={f:0,v:e,reactions:null,equals:Ls,rv:0,wv:0};return n}function Tt(e,t){const n=Yt(e);return ja(n),n}function ee(e,t=!1,n=!0){const s=Yt(e);return t||(s.equals=js),bn&&n&&B!==null&&B.l!==null&&(B.l.s??=[]).push(s),s}function Ta(e,t){return x(e,Pn(()=>i(e))),t}function x(e,t,n=!1){A!==null&&(!at||(A.f&qs)!==0)&&qn()&&(A.f&(te|wt|ts|qs))!==0&&!yt?.includes(e)&&aa();let s=n?un(t):t;return an(e,s)}function an(e,t){if(!e.equals(t)){var n=e.v;ln?Dt.set(e,t):Dt.set(e,n),e.v=t;var s=rt.ensure();s.capture(e,n),(e.f&te)!==0&&((e.f&ye)!==0&&rs(e),fe(e,(e.f&ze)!==0?ve:it)),e.wv=vr(),Ks(e,ye),qn()&&M!==null&&(M.f&ve)!==0&&(M.f&(bt|Kt))===0&&(Ne===null?Wa([e]):Ne.push(e)),!s.is_fork&&zn.size>0&&!Ys&&Ca()}return t}function Ca(){Ys=!1;var e=Bt;Rn(!0);const t=Array.from(zn);try{for(const n of t)(n.f&ve)!==0&&fe(n,it),kn(n)&&wn(n)}finally{Rn(e)}zn.clear()}function mn(e){x(e,e.v+1)}function Ks(e,t){var n=e.reactions;if(n!==null)for(var s=qn(),r=n.length,a=0;a<r;a++){var c=n[a],l=c.f;if(!(!s&&c===M)){var f=(l&ye)===0;if(f&&fe(c,t),(l&te)!==0){var v=c;Pe?.delete(v),(l&Gt)===0&&(l&ze&&(c.f|=Gt),Ks(v,it))}else f&&((l&wt)!==0&&gt!==null&&gt.add(c),zt(c))}}}function un(e){if(typeof e!="object"||e===null||hn in e)return e;const t=Qn(e);if(t!==zr&&t!==Yr)return e;var n=new Map,s=Zn(e),r=Tt(0),a=Vt,c=l=>{if(Vt===a)return l();var f=A,v=Vt;me(null),Ss(a);var d=l();return me(f),Ss(v),d};return s&&n.set("length",Tt(e.length)),new Proxy(e,{defineProperty(l,f,v){(!("value"in v)||v.configurable===!1||v.enumerable===!1||v.writable===!1)&&sa();var d=n.get(f);return d===void 0?d=c(()=>{var y=Tt(v.value);return n.set(f,y),y}):x(d,v.value,!0),!0},deleteProperty(l,f){var v=n.get(f);if(v===void 0){if(f in l){const d=c(()=>Tt(ce));n.set(f,d),mn(r)}}else x(v,ce),mn(r);return!0},get(l,f,v){if(f===hn)return e;var d=n.get(f),y=f in l;if(d===void 0&&(!y||pn(l,f)?.writable)&&(d=c(()=>{var w=un(y?l[f]:ce),h=Tt(w);return h}),n.set(f,d)),d!==void 0){var p=i(d);return p===ce?void 0:p}return Reflect.get(l,f,v)},getOwnPropertyDescriptor(l,f){var v=Reflect.getOwnPropertyDescriptor(l,f);if(v&&"value"in v){var d=n.get(f);d&&(v.value=i(d))}else if(v===void 0){var y=n.get(f),p=y?.v;if(y!==void 0&&p!==ce)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return v},has(l,f){if(f===hn)return!0;var v=n.get(f),d=v!==void 0&&v.v!==ce||Reflect.has(l,f);if(v!==void 0||M!==null&&(!d||pn(l,f)?.writable)){v===void 0&&(v=c(()=>{var p=d?un(l[f]):ce,w=Tt(p);return w}),n.set(f,v));var y=i(v);if(y===ce)return!1}return d},set(l,f,v,d){var y=n.get(f),p=f in l;if(s&&f==="length")for(var w=v;w<y.v;w+=1){var h=n.get(w+"");h!==void 0?x(h,ce):w in l&&(h=c(()=>Tt(ce)),n.set(w+"",h))}if(y===void 0)(!p||pn(l,f)?.writable)&&(y=c(()=>Tt(void 0)),x(y,un(v)),n.set(f,y));else{p=y.v!==ce;var j=c(()=>un(v));x(y,j)}var F=Reflect.getOwnPropertyDescriptor(l,f);if(F?.set&&F.set.call(d,v),!p){if(s&&typeof f=="string"){var D=n.get("length"),$=Number(f);Number.isInteger($)&&$>=D.v&&x(D,$+1)}mn(r)}return!0},ownKeys(l){i(r);var f=Reflect.ownKeys(l).filter(y=>{var p=n.get(y);return p===void 0||p.v!==ce});for(var[v,d]of n)d.v!==ce&&!(v in l)&&f.push(v);return f},setPrototypeOf(){ra()}})}var ks,Js,Xs,Zs;function Ra(){if(ks===void 0){ks=window,Js=/Firefox/.test(navigator.userAgent);var e=Element.prototype,t=Node.prototype,n=Text.prototype;Xs=pn(t,"firstChild").get,Zs=pn(t,"nextSibling").get,bs(e)&&(e.__click=void 0,e.__className=void 0,e.__attributes=null,e.__style=void 0,e.__e=void 0),bs(n)&&(n.__t=void 0)}}function Nt(e=""){return document.createTextNode(e)}function Cn(e){return Xs.call(e)}function xn(e){return Zs.call(e)}function o(e,t){return Cn(e)}function pt(e,t=!1){{var n=Cn(e);return n instanceof Comment&&n.data===""?xn(n):n}}function u(e,t=1,n=!1){let s=e;for(;t--;)s=xn(s);return s}function Ia(e){e.textContent=""}function Qs(){return!1}function as(e){var t=A,n=M;me(null),ot(null);try{return e()}finally{me(t),ot(n)}}function er(e){M===null&&(A===null&&ta(),ea()),ln&&Qr()}function Ma(e,t){var n=t.last;n===null?t.last=t.first=e:(n.next=e,e.prev=n,t.last=e)}function qt(e,t,n){var s=M;s!==null&&(s.f&Te)!==0&&(e|=Te);var r={ctx:B,deps:null,nodes:null,f:e|ye|ze,first:null,fn:t,last:null,next:null,parent:s,b:s&&s.b,prev:null,teardown:null,wv:0,ac:null};if(n)try{wn(r),r.f|=es}catch(l){throw ge(r),l}else t!==null&&zt(r);var a=r;if(n&&a.deps===null&&a.teardown===null&&a.nodes===null&&a.first===a.last&&(a.f&on)===0&&(a=a.first,(e&wt)!==0&&(e&nn)!==0&&a!==null&&(a.f|=nn)),a!==null&&(a.parent=s,s!==null&&Ma(a,s),A!==null&&(A.f&te)!==0&&(e&Kt)===0)){var c=A;(c.effects??=[]).push(a)}return r}function gn(){return A!==null&&!at}function tr(e){const t=qt(Dn,null,!1);return fe(t,ve),t.teardown=e,t}function Yn(e){er();var t=M.f,n=!A&&(t&bt)!==0&&(t&es)===0;if(n){var s=B;(s.e??=[]).push(e)}else return nr(e)}function nr(e){return qt(Os|Fs,e,!1)}function Da(e){return er(),qt(Dn|Fs,e,!0)}function Na(e){rt.ensure();const t=qt(Kt|on,e,!0);return(n={})=>new Promise(s=>{n.outro?Ht(t,()=>{ge(t),s(void 0)}):(ge(t),s(void 0))})}function Oa(e){return qt(ts|on,e,!0)}function Pa(e,t=0){return qt(Dn|t,e,!0)}function C(e,t=[],n=[],s=[]){ka(s,t,n,r=>{qt(Dn,()=>e(...r.map(i)),!0)})}function is(e,t=0){var n=qt(wt|t,e,!0);return n}function Oe(e){return qt(bt|on,e,!0)}function sr(e){var t=e.teardown;if(t!==null){const n=ln,s=A;Es(!0),me(null);try{t.call(null)}finally{Es(n),me(s)}}}function rr(e,t=!1){var n=e.first;for(e.first=e.last=null;n!==null;){const r=n.ac;r!==null&&as(()=>{r.abort(Qt)});var s=n.next;(n.f&Kt)!==0?n.parent=null:ge(n,t),n=s}}function Fa(e){for(var t=e.first;t!==null;){var n=t.next;(t.f&bt)===0&&ge(t),t=n}}function ge(e,t=!0){var n=!1;(t||(e.f&Ps)!==0)&&e.nodes!==null&&e.nodes.end!==null&&(La(e.nodes.start,e.nodes.end),n=!0),rr(e,t&&!n),In(e,0),fe(e,It);var s=e.nodes&&e.nodes.t;if(s!==null)for(const a of s)a.stop();sr(e);var r=e.parent;r!==null&&r.first!==null&&ar(e),e.next=e.prev=e.teardown=e.ctx=e.deps=e.fn=e.nodes=e.ac=null}function La(e,t){for(;e!==null;){var n=e===t?null:xn(e);e.remove(),e=n}}function ar(e){var t=e.parent,n=e.prev,s=e.next;n!==null&&(n.next=s),s!==null&&(s.prev=n),t!==null&&(t.first===e&&(t.first=s),t.last===e&&(t.last=n))}function Ht(e,t,n=!0){var s=[];ir(e,s,!0);var r=()=>{n&&ge(e),t&&t()},a=s.length;if(a>0){var c=()=>--a||r();for(var l of s)l.out(c)}else r()}function ir(e,t,n){if((e.f&Te)===0){e.f^=Te;var s=e.nodes&&e.nodes.t;if(s!==null)for(const l of s)(l.is_global||n)&&t.push(l);for(var r=e.first;r!==null;){var a=r.next,c=(r.f&nn)!==0||(r.f&bt)!==0&&(e.f&wt)!==0;ir(r,t,c?n:!1),r=a}}}function os(e){or(e,!0)}function or(e,t){if((e.f&Te)!==0){e.f^=Te,(e.f&ve)===0&&(fe(e,ye),zt(e));for(var n=e.first;n!==null;){var s=n.next,r=(n.f&nn)!==0||(n.f&bt)!==0;or(n,r?t:!1),n=s}var a=e.nodes&&e.nodes.t;if(a!==null)for(const c of a)(c.is_global||t)&&c.in()}}function lr(e,t){if(e.nodes)for(var n=e.nodes.start,s=e.nodes.end;n!==null;){var r=n===s?null:xn(n);t.append(n),n=r}}let Bt=!1;function Rn(e){Bt=e}let ln=!1;function Es(e){ln=e}let A=null,at=!1;function me(e){A=e}let M=null;function ot(e){M=e}let yt=null;function ja(e){A!==null&&(yt===null?yt=[e]:yt.push(e))}let de=null,Ae=0,Ne=null;function Wa(e){Ne=e}let cr=1,yn=0,Vt=yn;function Ss(e){Vt=e}function vr(){return++cr}function kn(e){var t=e.f;if((t&ye)!==0)return!0;if(t&te&&(e.f&=~Gt),(t&it)!==0){var n=e.deps;if(n!==null)for(var s=n.length,r=0;r<s;r++){var a=n[r];if(kn(a)&&zs(a),a.wv>e.wv)return!0}(t&ze)!==0&&Pe===null&&fe(e,ve)}return!1}function fr(e,t,n=!0){var s=e.reactions;if(s!==null&&!yt?.includes(e))for(var r=0;r<s.length;r++){var a=s[r];(a.f&te)!==0?fr(a,t,!1):t===a&&(n?fe(a,ye):(a.f&ve)!==0&&fe(a,it),zt(a))}}function ur(e){var t=de,n=Ae,s=Ne,r=A,a=yt,c=B,l=at,f=Vt,v=e.f;de=null,Ae=0,Ne=null,A=(v&(bt|Kt))===0?e:null,yt=null,sn(e.ctx),at=!1,Vt=++yn,e.ac!==null&&(as(()=>{e.ac.abort(Qt)}),e.ac=null);try{e.f|=Vn;var d=e.fn,y=d(),p=e.deps;if(de!==null){var w;if(In(e,Ae),p!==null&&Ae>0)for(p.length=Ae+de.length,w=0;w<de.length;w++)p[Ae+w]=de[w];else e.deps=p=de;if(gn()&&(e.f&ze)!==0)for(w=Ae;w<p.length;w++)(p[w].reactions??=[]).push(e)}else p!==null&&Ae<p.length&&(In(e,Ae),p.length=Ae);if(qn()&&Ne!==null&&!at&&p!==null&&(e.f&(te|it|ye))===0)for(w=0;w<Ne.length;w++)fr(Ne[w],e);return r!==null&&r!==e&&(yn++,Ne!==null&&(s===null?s=Ne:s.push(...Ne))),(e.f&Mt)!==0&&(e.f^=Mt),y}catch(h){return Us(h)}finally{e.f^=Vn,de=t,Ae=n,Ne=s,A=r,yt=a,sn(c),at=l,Vt=f}}function $a(e,t){let n=t.reactions;if(n!==null){var s=Vr.call(n,e);if(s!==-1){var r=n.length-1;r===0?n=t.reactions=null:(n[s]=n[r],n.pop())}}n===null&&(t.f&te)!==0&&(de===null||!de.includes(t))&&(fe(t,it),(t.f&ze)!==0&&(t.f^=ze,t.f&=~Gt),Gs(t),In(t,0))}function In(e,t){var n=e.deps;if(n!==null)for(var s=t;s<n.length;s++)$a(e,n[s])}function wn(e){var t=e.f;if((t&It)===0){fe(e,ve);var n=M,s=Bt;M=e,Bt=!0;try{(t&(wt|Jr))!==0?Fa(e):rr(e),sr(e);var r=ur(e);e.teardown=typeof r=="function"?r:null,e.wv=cr;var a;Hn&&pa&&(e.f&ye)!==0&&e.deps}finally{Bt=s,M=n}}}function i(e){var t=e.f,n=(t&te)!==0;if(A!==null&&!at){var s=M!==null&&(M.f&It)!==0;if(!s&&!yt?.includes(e)){var r=A.deps;if((A.f&Vn)!==0)e.rv<yn&&(e.rv=yn,de===null&&r!==null&&r[Ae]===e?Ae++:de===null?de=[e]:de.includes(e)||de.push(e));else{(A.deps??=[]).push(e);var a=e.reactions;a===null?e.reactions=[A]:a.includes(A)||a.push(A)}}}if(ln){if(Dt.has(e))return Dt.get(e);if(n){var c=e,l=c.v;return((c.f&ve)===0&&c.reactions!==null||_r(c))&&(l=rs(c)),Dt.set(c,l),l}}else n&&(!Pe?.has(e)||W?.is_fork&&!gn())&&(c=e,kn(c)&&zs(c),Bt&&gn()&&(c.f&ze)===0&&dr(c));if(Pe?.has(e))return Pe.get(e);if((e.f&Mt)!==0)throw e.v;return e.v}function dr(e){if(e.deps!==null){e.f^=ze;for(const t of e.deps)(t.reactions??=[]).push(e),(t.f&te)!==0&&(t.f&ze)===0&&dr(t)}}function _r(e){if(e.v===ce)return!0;if(e.deps===null)return!1;for(const t of e.deps)if(Dt.has(t)||(t.f&te)!==0&&_r(t))return!0;return!1}function Pn(e){var t=at;try{return at=!0,e()}finally{at=t}}const Ua=-7169;function fe(e,t){e.f=e.f&Ua|t}function Ha(e){if(!(typeof e!="object"||!e||e instanceof EventTarget)){if(hn in e)Kn(e);else if(!Array.isArray(e))for(let t in e){const n=e[t];typeof n=="object"&&n&&hn in n&&Kn(n)}}}function Kn(e,t=new Set){if(typeof e=="object"&&e!==null&&!(e instanceof EventTarget)&&!t.has(e)){t.add(e),e instanceof Date&&e.getTime();for(let s in e)try{Kn(e[s],t)}catch{}const n=Qn(e);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const s=Ds(n);for(let r in s){const a=s[r].get;if(a)try{a.call(e)}catch{}}}}}const Ba=["touchstart","touchmove"];function Va(e){return Ba.includes(e)}const Ga=new Set,As=new Set;function za(e,t,n,s={}){function r(a){if(s.capture||dn.call(t,a),!a.cancelBubble)return as(()=>n?.call(this,a))}return e.startsWith("pointer")||e.startsWith("touch")||e==="wheel"?On(()=>{t.addEventListener(e,r,s)}):t.addEventListener(e,r,s),r}function oe(e,t,n,s,r){var a={capture:s,passive:r},c=za(e,t,n,a);(t===document.body||t===window||t===document||t instanceof HTMLMediaElement)&&tr(()=>{t.removeEventListener(e,c,a)})}let Ts=null;function dn(e){var t=this,n=t.ownerDocument,s=e.type,r=e.composedPath?.()||[],a=r[0]||e.target;Ts=e;var c=0,l=Ts===e&&e.__root;if(l){var f=r.indexOf(l);if(f!==-1&&(t===document||t===window)){e.__root=t;return}var v=r.indexOf(t);if(v===-1)return;f<=v&&(c=f)}if(a=r[c]||e.target,a!==t){Gr(e,"currentTarget",{configurable:!0,get(){return a||n}});var d=A,y=M;me(null),ot(null);try{for(var p,w=[];a!==null;){var h=a.assignedSlot||a.parentNode||a.host||null;try{var j=a["__"+s];j!=null&&(!a.disabled||e.target===a)&&j.call(a,e)}catch(F){p?w.push(F):p=F}if(e.cancelBubble||h===t||h===null)break;a=h}if(p){for(let F of w)queueMicrotask(()=>{throw F});throw p}}finally{e.__root=t,delete e.currentTarget,me(d),ot(y)}}}function Ya(e){var t=document.createElement("template");return t.innerHTML=e.replaceAll("<!>","<!---->"),t.content}function Jn(e,t){var n=M;n.nodes===null&&(n.nodes={start:e,end:t,a:null,t:null})}function q(e,t){var n=(t&va)!==0,s=(t&fa)!==0,r,a=!e.startsWith("<!>");return()=>{r===void 0&&(r=Ya(a?e:"<!>"+e),n||(r=Cn(r)));var c=s||Js?document.importNode(r,!0):r.cloneNode(!0);if(n){var l=Cn(c),f=c.lastChild;Jn(l,f)}else Jn(c,c);return c}}function $t(){var e=document.createDocumentFragment(),t=document.createComment(""),n=Nt();return e.append(t,n),Jn(t,n),e}function g(e,t){e!==null&&e.before(t)}function m(e,t){var n=t==null?"":typeof t=="object"?t+"":t;n!==(e.__t??=e.nodeValue)&&(e.__t=n,e.nodeValue=n+"")}function Ka(e,t){return Ja(e,t)}const Zt=new Map;function Ja(e,{target:t,anchor:n,props:s={},events:r,context:a,intro:c=!0}){Ra();var l=new Set,f=y=>{for(var p=0;p<y.length;p++){var w=y[p];if(!l.has(w)){l.add(w);var h=Va(w);t.addEventListener(w,dn,{passive:h});var j=Zt.get(w);j===void 0?(document.addEventListener(w,dn,{passive:h}),Zt.set(w,1)):Zt.set(w,j+1)}}};f(Mn(Ga)),As.add(f);var v=void 0,d=Na(()=>{var y=n??t.appendChild(Nt());return qa(y,{pending:()=>{}},p=>{if(a){Ws({});var w=B;w.c=a}r&&(s.$$events=r),v=e(p,s)||{},a&&$s()}),()=>{for(var p of l){t.removeEventListener(p,dn);var w=Zt.get(p);--w===0?(document.removeEventListener(p,dn),Zt.delete(p)):Zt.set(p,w)}As.delete(f),y!==n&&y.parentNode?.removeChild(y)}});return Xa.set(v,d),v}let Xa=new WeakMap;class Za{anchor;#e=new Map;#t=new Map;#s=new Map;#n=new Set;#l=!0;constructor(t,n=!0){this.anchor=t,this.#l=n}#a=()=>{var t=W;if(this.#e.has(t)){var n=this.#e.get(t),s=this.#t.get(n);if(s)os(s),this.#n.delete(n);else{var r=this.#s.get(n);r&&(this.#t.set(n,r.effect),this.#s.delete(n),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),s=r.effect)}for(const[a,c]of this.#e){if(this.#e.delete(a),a===t)break;const l=this.#s.get(c);l&&(ge(l.effect),this.#s.delete(c))}for(const[a,c]of this.#t){if(a===n||this.#n.has(a))continue;const l=()=>{if(Array.from(this.#e.values()).includes(a)){var v=document.createDocumentFragment();lr(c,v),v.append(Nt()),this.#s.set(a,{effect:c,fragment:v})}else ge(c);this.#n.delete(a),this.#t.delete(a)};this.#l||!s?(this.#n.add(a),Ht(c,l,!1)):l()}}};#r=t=>{this.#e.delete(t);const n=Array.from(this.#e.values());for(const[s,r]of this.#s)n.includes(s)||(ge(r.effect),this.#s.delete(s))};ensure(t,n){var s=W,r=Qs();if(n&&!this.#t.has(t)&&!this.#s.has(t))if(r){var a=document.createDocumentFragment(),c=Nt();a.append(c),this.#s.set(t,{effect:Oe(()=>n(c)),fragment:a})}else this.#t.set(t,Oe(()=>n(this.anchor)));if(this.#e.set(s,t),r){for(const[l,f]of this.#t)l===t?s.skipped_effects.delete(f):s.skipped_effects.add(f);for(const[l,f]of this.#s)l===t?s.skipped_effects.delete(f.effect):s.skipped_effects.add(f.effect);s.oncommit(this.#a),s.ondiscard(this.#r)}else this.#a()}}function k(e,t,n=!1){var s=new Za(e),r=n?nn:0;function a(c,l){s.ensure(c,l)}is(()=>{var c=!1;t((l,f=!0)=>{c=!0,a(f,l)}),c||a(!1,null)},r)}function ht(e,t){return t}function Qa(e,t,n){for(var s=[],r=t.length,a,c=t.length,l=0;l<r;l++){let y=t[l];Ht(y,()=>{if(a){if(a.pending.delete(y),a.done.add(y),a.pending.size===0){var p=e.outrogroups;Xn(Mn(a.done)),p.delete(a),p.size===0&&(e.outrogroups=null)}}else c-=1},!1)}if(c===0){var f=s.length===0&&n!==null;if(f){var v=n,d=v.parentNode;Ia(d),d.append(v),e.items.clear()}Xn(t,!f)}else a={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(a)}function Xn(e,t=!0){for(var n=0;n<e.length;n++)ge(e[n],t)}var Cs;function mt(e,t,n,s,r,a=null){var c=e,l=new Map;{var f=e;c=f.appendChild(Nt())}var v=null,d=Vs(()=>{var F=n();return Zn(F)?F:F==null?[]:Mn(F)}),y,p=!0;function w(){j.fallback=v,ei(j,y,c,t,s),v!==null&&(y.length===0?(v.f&Rt)===0?os(v):(v.f^=Rt,_n(v,null,c)):Ht(v,()=>{v=null}))}var h=is(()=>{y=i(d);for(var F=y.length,D=new Set,$=W,Ot=Qs(),Ce=0;Ce<F;Ce+=1){var Fe=y[Ce],Le=s(Fe,Ce),_e=p?null:l.get(Le);_e?(_e.v&&an(_e.v,Fe),_e.i&&an(_e.i,Ce),Ot&&$.skipped_effects.delete(_e.e)):(_e=ti(l,p?c:Cs??=Nt(),Fe,Le,Ce,r,t,n),p||(_e.e.f|=Rt),l.set(Le,_e)),D.add(Le)}if(F===0&&a&&!v&&(p?v=Oe(()=>a(c)):(v=Oe(()=>a(Cs??=Nt())),v.f|=Rt)),!p)if(Ot){for(const[Ye,cn]of l)D.has(Ye)||$.skipped_effects.add(cn.e);$.oncommit(w),$.ondiscard(()=>{})}else w();i(d)}),j={effect:h,items:l,outrogroups:null,fallback:v};p=!1}function ei(e,t,n,s,r){var a=t.length,c=e.items,l=e.effect.first,f,v=null,d=[],y=[],p,w,h,j;for(j=0;j<a;j+=1){if(p=t[j],w=r(p,j),h=c.get(w).e,e.outrogroups!==null)for(const Ye of e.outrogroups)Ye.pending.delete(h),Ye.done.delete(h);if((h.f&Rt)!==0)if(h.f^=Rt,h===l)_n(h,null,n);else{var F=v?v.next:l;h===e.effect.last&&(e.effect.last=h.prev),h.prev&&(h.prev.next=h.next),h.next&&(h.next.prev=h.prev),Ct(e,v,h),Ct(e,h,F),_n(h,F,n),v=h,d=[],y=[],l=v.next;continue}if((h.f&Te)!==0&&os(h),h!==l){if(f!==void 0&&f.has(h)){if(d.length<y.length){var D=y[0],$;v=D.prev;var Ot=d[0],Ce=d[d.length-1];for($=0;$<d.length;$+=1)_n(d[$],D,n);for($=0;$<y.length;$+=1)f.delete(y[$]);Ct(e,Ot.prev,Ce.next),Ct(e,v,Ot),Ct(e,Ce,D),l=D,v=Ce,j-=1,d=[],y=[]}else f.delete(h),_n(h,l,n),Ct(e,h.prev,h.next),Ct(e,h,v===null?e.effect.first:v.next),Ct(e,v,h),v=h;continue}for(d=[],y=[];l!==null&&l!==h;)(f??=new Set).add(l),y.push(l),l=l.next;if(l===null)continue}(h.f&Rt)===0&&d.push(h),v=h,l=h.next}if(e.outrogroups!==null){for(const Ye of e.outrogroups)Ye.pending.size===0&&(Xn(Mn(Ye.done)),e.outrogroups?.delete(Ye));e.outrogroups.size===0&&(e.outrogroups=null)}if(l!==null||f!==void 0){var Fe=[];if(f!==void 0)for(h of f)(h.f&Te)===0&&Fe.push(h);for(;l!==null;)(l.f&Te)===0&&l!==e.fallback&&Fe.push(l),l=l.next;var Le=Fe.length;if(Le>0){var _e=a===0?n:null;Qa(e,Fe,_e)}}}function ti(e,t,n,s,r,a,c,l){var f=(c&oa)!==0?(c&ca)===0?ee(n,!1,!1):Yt(n):null,v=(c&la)!==0?Yt(r):null;return{v:f,i:v,e:Oe(()=>(a(t,f??n,v??r,l),()=>{e.delete(s)}))}}function _n(e,t,n){if(e.nodes)for(var s=e.nodes.start,r=e.nodes.end,a=t&&(t.f&Rt)===0?t.nodes.start:n;s!==null;){var c=xn(s);if(a.before(s),s===r)return;s=c}}function Ct(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}function pr(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=pr(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function ni(){for(var e,t,n=0,s="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=pr(e))&&(s&&(s+=" "),s+=t);return s}function si(e){return typeof e=="object"?ni(e):e??""}const Rs=[...` 	
\r\f¬†\v\uFEFF`];function ri(e,t,n){var s=e==null?"":""+e;if(t&&(s=s?s+" "+t:t),n){for(var r in n)if(n[r])s=s?s+" "+r:r;else if(s.length)for(var a=r.length,c=0;(c=s.indexOf(r,c))>=0;){var l=c+a;(c===0||Rs.includes(s[c-1]))&&(l===s.length||Rs.includes(s[l]))?s=(c===0?"":s.substring(0,c))+s.substring(l+1):c=l}}return s===""?null:s}function ai(e,t){return e==null?null:String(e)}function le(e,t,n,s,r,a){var c=e.__className;if(c!==n||c===void 0){var l=ri(n,s,a);l==null?e.removeAttribute("class"):e.className=l,e.__className=n}else if(a&&r!==a)for(var f in a){var v=!!a[f];(r==null||v!==!!r[f])&&e.classList.toggle(f,v)}return a}function Ut(e,t,n,s){var r=e.__style;if(r!==t){var a=ai(t);a==null?e.removeAttribute("style"):e.style.cssText=a,e.__style=t}return s}const ii=Symbol("is custom element"),oi=Symbol("is html");function li(e,t,n,s){var r=ci(e);r[t]!==(r[t]=n)&&(n==null?e.removeAttribute(t):typeof n!="string"&&vi(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function ci(e){return e.__attributes??={[ii]:e.nodeName.includes("-"),[oi]:e.namespaceURI===ua}}var Is=new Map;function vi(e){var t=e.getAttribute("is")||e.nodeName,n=Is.get(t);if(n)return n;Is.set(t,n=[]);for(var s,r=e,a=Element.prototype;a!==r;){s=Ds(r);for(var c in s)s[c].set&&n.push(c);r=Qn(r)}return n}function fi(e){return function(...t){var n=t[0];return n.stopPropagation(),e?.apply(this,t)}}function ui(e=!1){const t=B,n=t.l.u;if(!n)return;let s=()=>Ha(t.s);if(e){let r=0,a={};const c=ss(()=>{let l=!1;const f=t.s;for(const v in f)f[v]!==a[v]&&(a[v]=f[v],l=!0);return l&&r++,r});s=()=>i(c)}n.b.length&&Da(()=>{Ms(t,s),Bn(n.b)}),Yn(()=>{const r=Pn(()=>n.m.map(Kr));return()=>{for(const a of r)typeof a=="function"&&a()}}),n.a.length&&Yn(()=>{Ms(t,s),Bn(n.a)})}function Ms(e,t){if(e.l.s)for(const n of e.l.s)i(n);t()}function di(e,t){var n=e.$$events?.[t.type],s=Zn(n)?n.slice():n==null?[]:[n];for(var r of s)r.call(this,t)}function _i(e){B===null&&Xr(),bn&&B.l!==null?pi(B).m.push(e):Yn(()=>{const t=Pn(e);if(typeof t=="function")return t})}function pi(e){var t=e.l;return t.u??={a:[],b:[],m:[]}}const hi="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(hi);ha();const mi={ALL:"all"},gi={AGENT_UPDATE:"agent_update"};class yi{ws=null;url;reconnectInterval;maxReconnectInterval;reconnectDecay;maxReconnectAttempts;reconnectAttempts=0;shouldReconnect=!0;handlers=new Map;topics;reconnectTimeoutId=null;constructor(t={}){const s=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/api/v1/ws`;this.url=t.url||s,this.reconnectInterval=t.reconnectInterval||1e3,this.maxReconnectInterval=t.maxReconnectInterval||3e4,this.reconnectDecay=t.reconnectDecay||1.5,this.maxReconnectAttempts=t.maxReconnectAttempts||0,this.topics=t.topics||[mi.ALL]}connect(){if(!(this.ws&&(this.ws.readyState===WebSocket.CONNECTING||this.ws.readyState===WebSocket.OPEN)))try{this.ws=new WebSocket(this.url),this.setupEventHandlers()}catch(t){console.error("[WS] Connection error:",t),this.scheduleReconnect()}}setupEventHandlers(){this.ws&&(this.ws.onopen=()=>{console.log("[WS] Connected"),this.reconnectAttempts=0,this.reconnectInterval=1e3,this.subscribe(this.topics),this.emit("_connected",{type:"_connected",timestamp:new Date().toISOString(),payload:null})},this.ws.onclose=t=>{console.log(`[WS] Disconnected (code: ${t.code}, reason: ${t.reason})`),this.ws=null,this.emit("_disconnected",{type:"_disconnected",timestamp:new Date().toISOString(),payload:{code:t.code,reason:t.reason}}),this.shouldReconnect&&this.scheduleReconnect()},this.ws.onerror=t=>{console.error("[WS] Error:",t),this.emit("_error",{type:"_error",timestamp:new Date().toISOString(),payload:t})},this.ws.onmessage=t=>{try{const n=t.data.split(`
`).filter(s=>s.trim());for(const s of n){const r=JSON.parse(s);this.handleMessage(r)}}catch(n){console.error("[WS] Failed to parse message:",n,t.data)}})}handleMessage(t){this.emit(t.type,t),this.emit("*",t)}emit(t,n){const s=this.handlers.get(t);s&&s.forEach(r=>{try{r(n)}catch(a){console.error(`[WS] Handler error for ${t}:`,a)}})}scheduleReconnect(){if(!this.shouldReconnect)return;if(this.maxReconnectAttempts>0&&this.reconnectAttempts>=this.maxReconnectAttempts){console.log("[WS] Max reconnect attempts reached"),this.emit("_max_reconnect",{type:"_max_reconnect",timestamp:new Date().toISOString(),payload:null});return}const t=Math.min(this.reconnectInterval*Math.pow(this.reconnectDecay,this.reconnectAttempts),this.maxReconnectInterval);console.log(`[WS] Reconnecting in ${t}ms (attempt ${this.reconnectAttempts+1})`),this.reconnectTimeoutId=setTimeout(()=>{this.reconnectAttempts++,this.connect()},t)}subscribe(t){this.topics=t,this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(JSON.stringify({topics:t}))}on(t,n){return this.handlers.has(t)||this.handlers.set(t,new Set),this.handlers.get(t).add(n),()=>{this.handlers.get(t)?.delete(n)}}off(t,n){this.handlers.get(t)?.delete(n)}disconnect(){this.shouldReconnect=!1,this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.ws&&(this.ws.close(1e3,"Client disconnect"),this.ws=null)}get isConnected(){return this.ws!==null&&this.ws.readyState===WebSocket.OPEN}get readyState(){return this.ws?.readyState??WebSocket.CLOSED}}let tn=null;function wi(e){return tn||(tn=new yi(e)),tn}function bi(){tn&&(tn.disconnect(),tn=null)}var qi=q('<span class="mail-badge svelte-1n46o8q"> </span>'),xi=q('<span class="town-name svelte-1n46o8q"> </span>'),ki=q('<span class="theme-icon svelte-1n46o8q">‚òÄÔ∏è</span>'),Ei=q('<span class="theme-icon svelte-1n46o8q">üåô</span>'),Si=q('<div class="loading svelte-1n46o8q"><div class="spinner svelte-1n46o8q"></div> <p class="svelte-1n46o8q">Loading town status...</p></div>'),Ai=q('<div class="error-container svelte-1n46o8q"><div class="error-icon svelte-1n46o8q">‚ö†Ô∏è</div> <p class="error-text svelte-1n46o8q"> </p> <button class="btn btn-primary svelte-1n46o8q">Retry</button></div>'),Ti=q('<span class="mail-badge small svelte-1n46o8q"> </span>'),Ci=q('<button><span class="agent-icon svelte-1n46o8q"> </span> <span class="agent-name svelte-1n46o8q"> </span> <span></span> <!></button>'),Ri=q('<section class="card svelte-1n46o8q"><h2 class="card-header svelte-1n46o8q">Global Agents</h2> <div class="agent-list svelte-1n46o8q"></div></section>'),Ii=q('<span class="convoy-status landed svelte-1n46o8q">‚úì</span>'),Mi=q('<span class="convoy-status active svelte-1n46o8q">‚óè</span>'),Di=q('<button><div class="convoy-header svelte-1n46o8q"><span class="convoy-icon svelte-1n46o8q">üöö</span> <span class="convoy-name svelte-1n46o8q"> </span> <!></div> <div class="convoy-id mono text-muted svelte-1n46o8q"> </div> <div class="convoy-progress-container svelte-1n46o8q"><div class="convoy-progress-bar svelte-1n46o8q"><div class="convoy-progress-fill svelte-1n46o8q"></div></div> <span class="convoy-progress-text svelte-1n46o8q"> </span></div></button>'),Ni=q('<section class="convoys-section svelte-1n46o8q"><h2 class="section-header svelte-1n46o8q">Convoys</h2> <div class="convoys-grid svelte-1n46o8q"></div></section>'),Oi=q('<span class="member-agent svelte-1n46o8q"> </span>'),Pi=q('<div class="member-item svelte-1n46o8q"><span class="member-status svelte-1n46o8q"> </span> <span class="member-id mono svelte-1n46o8q"> </span> <span class="member-title svelte-1n46o8q"> </span> <!></div>'),Fi=q('<div class="convoy-members svelte-1n46o8q"><h4 class="subsection-header svelte-1n46o8q">Tracked Issues</h4> <div class="member-list svelte-1n46o8q"></div></div>'),Li=q('<div class="blocker-item svelte-1n46o8q"><span class="blocker-icon svelte-1n46o8q">üö´</span> <span class="blocker-id mono svelte-1n46o8q"> </span> <span class="text-muted svelte-1n46o8q">blocked by</span> <span class="blocker-by mono svelte-1n46o8q"> </span></div>'),ji=q('<div class="convoy-blockers svelte-1n46o8q"><h4 class="subsection-header svelte-1n46o8q">Blockers</h4> <div class="blocker-list svelte-1n46o8q"></div></div>'),Wi=q('<div class="timestamp svelte-1n46o8q"><span class="timestamp-label svelte-1n46o8q">Created:</span> <span class="timestamp-value svelte-1n46o8q"> </span></div>'),$i=q('<div class="timestamp svelte-1n46o8q"><span class="timestamp-label svelte-1n46o8q">Completed:</span> <span class="timestamp-value svelte-1n46o8q"> </span></div>'),Ui=q('<div class="modal-overlay svelte-1n46o8q" role="presentation"><div class="modal-content card svelte-1n46o8q" role="dialog" aria-modal="true" tabindex="-1"><div class="modal-header svelte-1n46o8q"><div class="convoy-header svelte-1n46o8q"><span class="convoy-icon large svelte-1n46o8q">üöö</span> <div class="svelte-1n46o8q"><h3 class="convoy-name large svelte-1n46o8q"> </h3> <div class="convoy-id mono text-muted svelte-1n46o8q"> </div></div></div> <button class="modal-close svelte-1n46o8q">√ó</button></div> <div class="convoy-details svelte-1n46o8q"><div class="convoy-progress-large svelte-1n46o8q"><div class="convoy-progress-bar large svelte-1n46o8q"><div class="convoy-progress-fill svelte-1n46o8q"></div></div> <div class="convoy-progress-info svelte-1n46o8q"><span class="convoy-progress-percent svelte-1n46o8q"> </span> <span class="convoy-progress-count svelte-1n46o8q"> </span></div></div> <!> <!> <div class="convoy-timestamps svelte-1n46o8q"><!> <!></div></div></div></div>'),Hi=q('<span class="service-badge svelte-1n46o8q" title="Witness">üëÄ</span>'),Bi=q('<span class="service-badge svelte-1n46o8q" title="Refinery">‚öôÔ∏è</span>'),Vi=q('<span class="work-title mono svelte-1n46o8q"> </span>'),Gi=q('<span class="mail-badge small svelte-1n46o8q"> </span>'),zi=q('<button><span class="agent-icon small svelte-1n46o8q"> </span> <span class="agent-name svelte-1n46o8q"> </span> <span></span> <!> <!></button>'),Yi=q('<div class="rig-agents svelte-1n46o8q"></div>'),Ki=q('<div class="card rig-card svelte-1n46o8q"><div class="rig-header svelte-1n46o8q"><h3 class="rig-name svelte-1n46o8q"> </h3> <div class="rig-services svelte-1n46o8q"><!> <!></div></div> <p class="rig-path mono text-muted svelte-1n46o8q"> </p> <div class="rig-stats svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <span class="svelte-1n46o8q"> </span></div> <!></div>'),Ji=q('<section class="summary-grid svelte-1n46o8q"><div class="card summary-card svelte-1n46o8q"><div class="summary-value svelte-1n46o8q"> </div> <div class="summary-label svelte-1n46o8q">Rigs</div></div> <div class="card summary-card svelte-1n46o8q"><div class="summary-value svelte-1n46o8q"> </div> <div class="summary-label svelte-1n46o8q">Polecats</div></div> <div class="card summary-card svelte-1n46o8q"><div class="summary-value svelte-1n46o8q"> </div> <div class="summary-label svelte-1n46o8q">Crews</div></div> <div class="card summary-card svelte-1n46o8q"><div class="summary-value svelte-1n46o8q"> </div> <div class="summary-label svelte-1n46o8q">Active Hooks</div></div></section> <!> <!> <!> <section class="rigs-section svelte-1n46o8q"><h2 class="section-header svelte-1n46o8q">Rigs</h2> <div class="rigs-grid svelte-1n46o8q"></div></section>',1),Xi=q('<div class="loading-inline svelte-1n46o8q"><div class="spinner small svelte-1n46o8q"></div> <span class="svelte-1n46o8q">Loading messages...</span></div>'),Zi=q('<div class="error-inline svelte-1n46o8q"><span class="svelte-1n46o8q"> </span> <button class="btn btn-sm svelte-1n46o8q">Retry</button></div>'),Qi=q('<div class="empty-state svelte-1n46o8q"><span class="empty-icon svelte-1n46o8q">üì≠</span> <p class="svelte-1n46o8q">No messages</p></div>'),eo=q('<span class="pin-icon svelte-1n46o8q">üìå</span>'),to=q('<button><div class="mail-item-header svelte-1n46o8q"><span class="mail-from svelte-1n46o8q"> </span> <span class="mail-time svelte-1n46o8q"> </span></div> <div class="mail-subject svelte-1n46o8q"><!> <span> </span></div> <div class="mail-preview svelte-1n46o8q"> </div></button>'),no=q('<div class="mail-items svelte-1n46o8q"></div>'),so=q('<div class="svelte-1n46o8q"><strong class="svelte-1n46o8q">CC:</strong> </div>'),ro=q('<div class="mail-detail-header svelte-1n46o8q"><button class="btn-back svelte-1n46o8q">‚Üê Back</button> <div class="mail-detail-meta svelte-1n46o8q"><span> </span> <span class="badge svelte-1n46o8q"> </span></div></div> <div class="mail-detail-content svelte-1n46o8q"><h2 class="mail-detail-subject svelte-1n46o8q"> </h2> <div class="mail-detail-info svelte-1n46o8q"><div class="svelte-1n46o8q"><strong class="svelte-1n46o8q">From:</strong> </div> <div class="svelte-1n46o8q"><strong class="svelte-1n46o8q">To:</strong> </div> <div class="svelte-1n46o8q"><strong class="svelte-1n46o8q">Date:</strong> </div> <!></div> <div class="mail-detail-body svelte-1n46o8q"><pre class="svelte-1n46o8q"> </pre></div></div>',1),ao=q('<div class="empty-state svelte-1n46o8q"><span class="empty-icon svelte-1n46o8q">üìß</span> <p class="svelte-1n46o8q">Select a message to read</p></div>'),io=q('<div class="mail-container svelte-1n46o8q"><div><div class="mail-list-header svelte-1n46o8q"><h2 class="svelte-1n46o8q">Inbox</h2> <button class="btn btn-icon svelte-1n46o8q" title="Refresh">üîÑ</button></div> <!></div> <div><!></div></div>'),oo=q('<div class="panel-loading svelte-1n46o8q"><div class="spinner svelte-1n46o8q"></div></div>'),lo=q('<div class="info-item svelte-1n46o8q"><span class="info-label svelte-1n46o8q">State</span> <span class="info-value svelte-1n46o8q"> </span></div>'),co=q('<p class="work-desc svelte-1n46o8q"> </p>'),vo=q('<div class="panel-section svelte-1n46o8q"><h4 class="section-title svelte-1n46o8q">Current Work</h4> <div class="work-card svelte-1n46o8q"><span class="work-bead mono svelte-1n46o8q"> </span> <!></div></div>'),fo=q('<span class="mail-badge svelte-1n46o8q"> </span>'),uo=q('<div><div class="mail-header svelte-1n46o8q"><span class="mail-from svelte-1n46o8q"> </span> <span class="mail-time text-muted svelte-1n46o8q"> </span></div> <div class="mail-subject svelte-1n46o8q"> </div></div>'),_o=q('<div class="panel-mail-list svelte-1n46o8q"></div>'),po=q('<p class="empty-state-small text-muted svelte-1n46o8q">No mail</p>'),ho=q('<span class="activity-context text-muted svelte-1n46o8q"> </span>'),mo=q('<div class="activity-item svelte-1n46o8q"><span class="activity-icon svelte-1n46o8q"> </span> <div class="activity-content svelte-1n46o8q"><span class="activity-type svelte-1n46o8q"> </span> <!></div> <span class="activity-time text-muted svelte-1n46o8q"> </span></div>'),go=q('<div class="activity-list svelte-1n46o8q"></div>'),yo=q('<p class="empty-state-small text-muted svelte-1n46o8q">No recent activity</p>'),wo=q('<div class="panel-content svelte-1n46o8q"><div class="panel-section svelte-1n46o8q"><div class="agent-info-header svelte-1n46o8q"><span class="agent-icon large svelte-1n46o8q"> </span> <div class="agent-info-title svelte-1n46o8q"><h3 class="svelte-1n46o8q"> </h3> <span class="text-muted mono svelte-1n46o8q"> </span></div></div> <div class="info-grid svelte-1n46o8q"><div class="info-item svelte-1n46o8q"><span class="info-label svelte-1n46o8q">Status</span> <span class="info-value svelte-1n46o8q"><span></span> </span></div> <div class="info-item svelte-1n46o8q"><span class="info-label svelte-1n46o8q">Role</span> <span class="info-value svelte-1n46o8q"> </span></div> <div class="info-item svelte-1n46o8q"><span class="info-label svelte-1n46o8q">Session</span> <span class="info-value mono svelte-1n46o8q"> </span></div> <!></div></div> <!> <div class="panel-section svelte-1n46o8q"><h4 class="section-title svelte-1n46o8q">Mail <!></h4> <!></div> <div class="panel-section svelte-1n46o8q"><h4 class="section-title svelte-1n46o8q">Recent Activity</h4> <!></div></div>'),bo=q('<div class="panel-error svelte-1n46o8q"><p class="text-muted svelte-1n46o8q">Could not load agent details</p></div>'),qo=q('<aside class="detail-panel svelte-1n46o8q"><div class="panel-header svelte-1n46o8q"><h2 class="svelte-1n46o8q">Agent Details</h2> <button class="close-btn svelte-1n46o8q">√ó</button></div> <!></aside>'),xo=q('<div><header class="header svelte-1n46o8q"><div class="header-left svelte-1n46o8q"><div class="logo svelte-1n46o8q"><span class="logo-icon svelte-1n46o8q">‚õΩ</span> <h1 class="svelte-1n46o8q">Gas Town</h1></div> <nav class="nav-tabs svelte-1n46o8q"><button>Dashboard</button> <button>Mail <!></button></nav></div> <div class="header-right svelte-1n46o8q"><!> <span><span class="ws-dot svelte-1n46o8q"></span> </span> <button class="theme-toggle svelte-1n46o8q" title="Toggle theme"><!></button></div></header> <div class="content-wrapper svelte-1n46o8q"><main class="main svelte-1n46o8q"><!></main> <!></div> <footer class="footer svelte-1n46o8q"><p class="text-muted svelte-1n46o8q">Gas Town Dashboard v0.1.1</p></footer></div>');function ko(e,t){Ws(t,!1);let n=ee(null),s=ee([]),r=ee(null),a=ee(!0),c=ee(null),l=ee(!1),f=null,v=ee(null),d=ee(null),y=ee(!1),p=ee("dashboard"),w=ee("dark"),h=ee([]),j=ee(!1),F=ee(null),D=ee(null),$=ee({total:0,unread:0});function Ot(){const _=localStorage.getItem("gt-theme");_==="light"||_==="dark"?x(w,_):window.matchMedia("(prefers-color-scheme: light)").matches&&x(w,"light"),Fe()}function Ce(){x(w,i(w)==="dark"?"light":"dark"),localStorage.setItem("gt-theme",i(w)),Fe()}function Fe(){document.documentElement.setAttribute("data-theme",i(w))}async function Le(){try{const b=await(await fetch("/api/v1/status")).json();b.success?(x(n,b.data),x(c,null),f=new Date):x(c,b.error?.message||"Unknown error")}catch(_){x(c,_ instanceof Error?_.message:"Failed to fetch status")}finally{x(a,!1)}}async function _e(){try{const b=await(await fetch("/api/v1/convoys?status=all")).json();b.success&&x(s,b.data||[])}catch(_){console.error("Failed to fetch convoys:",_)}}async function Ye(_){try{const N=await(await fetch(`/api/v1/convoys/${_}`)).json();N.success&&x(r,N.data)}catch(b){console.error("Failed to fetch convoy details:",b)}}function cn(){x(r,null)}async function hr(_){x(y,!0);try{const N=await(await fetch(`/api/v1/agents/${_}/details`)).json();N.success?x(d,N.data):x(d,null)}catch{x(d,null)}finally{x(y,!1)}}function ls(_){i(v)===_?(x(v,null),x(d,null)):(x(v,_),hr(_))}function mr(){x(v,null),x(d,null)}async function Jt(){x(j,!0),x(F,null);try{const[_,b]=await Promise.all([fetch("/api/v1/mail"),fetch("/api/v1/mail/count")]),N=await _.json(),U=await b.json();N.success?x(h,N.data||[]):x(F,N.error?.message||"Failed to load messages"),U.success&&x($,U.data)}catch(_){x(F,_ instanceof Error?_.message:"Failed to fetch mail")}finally{x(j,!1)}}async function gr(_){try{await fetch(`/api/v1/mail/${_}/read`,{method:"POST"}),await Jt()}catch(b){console.error("Failed to mark as read:",b)}}function yr(_){x(D,_),_.read||gr(_.id)}function wr(_){if(!i(n))return;const b=_.payload;f=new Date;const N=i(n).agents?.findIndex(U=>U.address===b.address);if(N!==void 0&&N>=0){Ta(n,i(n).agents[N]={...i(n).agents[N],running:b.running,has_work:b.has_work,hook_bead:b.hook_bead,work_title:b.work_title,state:b.state}),x(n,i(n));return}for(const U of i(n).rigs??[]){const ne=U.agents?.findIndex(se=>se.address===b.address);if(ne!==void 0&&ne>=0&&U.agents){U.agents[ne]={...U.agents[ne],running:b.running,has_work:b.has_work,hook_bead:b.hook_bead,work_title:b.work_title,state:b.state},x(n,i(n));return}}console.log("[WS] Agent not found, refreshing:",b.address),Le()}_i(()=>{Ot(),Le(),_e(),Jt();const _=wi();_.on("_connected",()=>{x(l,!0),console.log("[App] WebSocket connected")}),_.on("_disconnected",()=>{x(l,!1),console.log("[App] WebSocket disconnected")}),_.on(gi.AGENT_UPDATE,wr),_.connect();const b=setInterval(()=>{i(l)||Le()},3e4),N=setInterval(_e,5e3),U=setInterval(Jt,3e4);return()=>{clearInterval(b),clearInterval(N),clearInterval(U),bi()}});function Fn(_){return{mayor:"üë®‚Äç‚öñÔ∏è",deacon:"‚õ™",witness:"üëÄ",refinery:"‚öôÔ∏è",polecat:"üê±",crew:"üë∑"}[_]||"ü§ñ"}function Ln(_){return{mayor:"var(--color-mayor)",deacon:"var(--color-deacon)",witness:"var(--color-witness)",refinery:"var(--color-refinery)",polecat:"var(--color-polecat)",crew:"var(--color-crew)"}[_]||"var(--color-gray)"}function cs(_){return _>=1?"var(--color-success)":_>=.5?"var(--color-warning)":"var(--color-primary)"}function br(_){return`${Math.round(_*100)}%`}function qr(_){switch(_){case"closed":return"‚úì";case"in_progress":case"hooked":return"‚ñ∂";default:return"‚óã"}}function xr(_){switch(_){case"closed":return"var(--color-success)";case"in_progress":case"hooked":return"var(--color-primary)";default:return"var(--color-gray)"}}function kr(_){return{spawn:"üåü",wake:"‚è∞",nudge:"üëÜ",handoff:"ü§ù",done:"‚úÖ",crash:"üí•",kill:"üî™",callback:"üìû",patrol_started:"üö∂",polecat_checked:"üëÅÔ∏è",polecat_nudged:"üëÜ",escalation_sent:"üì§",patrol_complete:"üèÅ"}[_]||"üìã"}function jn(_){const b=new Date(_),U=new Date().getTime()-b.getTime(),ne=Math.floor(U/6e4),se=Math.floor(U/36e5),we=Math.floor(U/864e5);return ne<1?"just now":ne<60?`${ne}m ago`:se<24?`${se}h ago`:we<7?`${we}d ago`:b.toLocaleDateString()}function Er(_){return{urgent:"var(--color-error)",high:"var(--color-warning)",normal:"var(--color-text-muted)",low:"var(--color-gray)"}[_||"normal"]||"var(--color-text-muted)"}function vs(_){return{urgent:"priority-urgent",high:"priority-high",normal:"priority-normal",low:"priority-low"}[_]||"priority-normal"}ui();var Wn=xo();let fs;var us=o(Wn),ds=o(us),Sr=u(o(ds),2),$n=o(Sr);let _s;var Un=u($n,2);let ps;var Ar=u(o(Un));{var Tr=_=>{var b=qi(),N=o(b);C(()=>m(N,i($).unread)),g(_,b)};k(Ar,_=>{i($).unread>0&&_(Tr)})}var Cr=u(ds,2),hs=o(Cr);{var Rr=_=>{var b=xi(),N=o(b);C(()=>m(N,i(n).name)),g(_,b)};k(hs,_=>{i(n)&&_(Rr)})}var En=u(hs,2);let ms;var Ir=u(o(En)),gs=u(En,2),Mr=o(gs);{var Dr=_=>{var b=ki();g(_,b)},Nr=_=>{var b=Ei();g(_,b)};k(Mr,_=>{i(w)==="dark"?_(Dr):_(Nr,!1)})}var Or=u(us,2),ys=o(Or),Pr=o(ys);{var Fr=_=>{var b=$t(),N=pt(b);{var U=se=>{var we=Si();g(se,we)},ne=se=>{var we=$t(),je=pt(we);{var lt=Ke=>{var ct=Ai(),be=u(o(ct),2),We=o(be),$e=u(be,2);C(()=>m(We,i(c))),oe("click",$e,Le),g(Ke,ct)},vn=Ke=>{var ct=$t(),be=pt(ct);{var We=$e=>{var Pt=Ji(),xt=pt(Pt),Xt=o(xt),J=o(Xt),pe=o(J),vt=u(Xt,2),kt=o(vt),Ft=o(kt),ue=u(vt,2),Re=o(ue),Je=o(Re),Xe=u(ue,2),Ze=o(Xe),qe=o(Ze),Ie=u(xt,2);{var Et=V=>{var O=Ri(),X=u(o(O),2);mt(X,5,()=>i(n).agents,ht,(Z,T)=>{var L=Ci();let z;var Q=o(L),he=o(Q),re=u(Q,2),xe=o(re),ke=u(re,2);let He;var E=u(ke,2);{var R=H=>{var I=Ti(),ae=o(I);C(()=>m(ae,i(T).unread_mail)),g(H,I)};k(E,H=>{i(T).unread_mail>0&&H(R)})}C((H,I)=>{z=le(L,1,"agent-item clickable svelte-1n46o8q",null,z,{selected:i(v)===i(T).address}),Ut(Q,`color: ${H??""}`),m(he,I),m(xe,i(T).name),He=le(ke,1,"status-dot svelte-1n46o8q",null,He,{running:i(T).running,stopped:!i(T).running})},[()=>Ln(i(T).role),()=>Fn(i(T).role)]),oe("click",L,()=>ls(i(T).address)),g(Z,L)}),g(V,O)};k(Ie,V=>{i(n).agents?.length>0&&V(Et)})}var Y=u(Ie,2);{var Ue=V=>{var O=Ni(),X=u(o(O),2);mt(X,5,()=>i(s),ht,(Z,T)=>{var L=Di();let z;var Q=o(L),he=u(o(Q),2),re=o(he),xe=u(he,2);{var ke=S=>{var G=Ii();g(S,G)},He=S=>{var G=Mi();g(S,G)};k(xe,S=>{i(T).status==="closed"?S(ke):S(He,!1)})}var E=u(Q,2),R=o(E),H=u(E,2),I=o(H),ae=o(I),Ee=u(I,2),Me=o(Ee);C(S=>{z=le(L,1,"card convoy-card svelte-1n46o8q",null,z,{completed:i(T).status==="closed"}),m(re,i(T).name),m(R,i(T).id),Ut(ae,`width: ${i(T).progress*100}%; background-color: ${S??""}`),m(Me,`${i(T).completed??""}/${i(T).total??""}`)},[()=>cs(i(T).progress)]),oe("click",L,()=>Ye(i(T).id)),g(Z,L)}),g(V,O)};k(Y,V=>{i(s).length>0&&V(Ue)})}var Qe=u(Y,2);{var St=V=>{var O=Ui(),X=o(O),Z=o(X),T=o(Z),L=u(o(T),2),z=o(L),Q=o(z),he=u(z,2),re=o(he),xe=u(T,2),ke=u(Z,2),He=o(ke),E=o(He),R=o(E),H=u(E,2),I=o(H),ae=o(I),Ee=u(I,2),Me=o(Ee),S=u(He,2);{var G=P=>{var ie=Fi(),tt=u(o(ie),2);mt(tt,5,()=>i(r).members,ht,(nt,Ge)=>{var jt=Pi(),At=o(jt),Se=o(At),De=u(At,2),Wt=o(De),ws=u(De,2),$r=o(ws),Ur=u(ws,2);{var Hr=fn=>{var Sn=Oi(),Br=o(Sn);C(()=>m(Br,`@${i(Ge).agent_name??""}`)),g(fn,Sn)};k(Ur,fn=>{i(Ge).agent_name&&fn(Hr)})}C((fn,Sn)=>{Ut(At,`color: ${fn??""}`),m(Se,Sn),m(Wt,i(Ge).id),m($r,i(Ge).title)},[()=>xr(i(Ge).status),()=>qr(i(Ge).status)]),g(nt,jt)}),g(P,ie)};k(S,P=>{i(r).members&&i(r).members.length>0&&P(G)})}var et=u(S,2);{var K=P=>{var ie=ji(),tt=u(o(ie),2);mt(tt,5,()=>i(r).blockers,ht,(nt,Ge)=>{var jt=Li(),At=u(o(jt),2),Se=o(At),De=u(At,4),Wt=o(De);C(()=>{m(Se,i(Ge).id),m(Wt,i(Ge).blocked_by)}),g(nt,jt)}),g(P,ie)};k(et,P=>{i(r).blockers&&i(r).blockers.length>0&&P(K)})}var Be=u(et,2),ut=o(Be);{var dt=P=>{var ie=Wi(),tt=u(o(ie),2),nt=o(tt);C(()=>m(nt,i(r).created_at)),g(P,ie)};k(ut,P=>{i(r).created_at&&P(dt)})}var Ve=u(ut,2);{var _t=P=>{var ie=$i(),tt=u(o(ie),2),nt=o(tt);C(()=>m(nt,i(r).completed_at)),g(P,ie)};k(Ve,P=>{i(r).completed_at&&P(_t)})}C((P,ie)=>{m(Q,i(r).name),m(re,i(r).id),Ut(R,`width: ${i(r).progress*100}%; background-color: ${P??""}`),m(ae,ie),m(Me,`${i(r).completed??""} of ${i(r).total??""} completed`)},[()=>cs(i(r).progress),()=>br(i(r).progress)]),oe("click",xe,cn),oe("click",X,fi(function(P){di.call(this,t,P)})),oe("click",O,cn),oe("keydown",O,P=>P.key==="Escape"&&cn()),g(V,O)};k(Qe,V=>{i(r)&&V(St)})}var ft=u(Qe,2),Lt=u(o(ft),2);mt(Lt,5,()=>i(n).rigs??[],ht,(V,O)=>{var X=Ki(),Z=o(X),T=o(Z),L=o(T),z=u(T,2),Q=o(z);{var he=S=>{var G=Hi();g(S,G)};k(Q,S=>{i(O).has_witness&&S(he)})}var re=u(Q,2);{var xe=S=>{var G=Bi();g(S,G)};k(re,S=>{i(O).has_refinery&&S(xe)})}var ke=u(Z,2),He=o(ke),E=u(ke,2),R=o(E),H=o(R),I=u(R,2),ae=o(I),Ee=u(E,2);{var Me=S=>{var G=Yi();mt(G,5,()=>i(O).agents,ht,(et,K)=>{var Be=zi();let ut;var dt=o(Be),Ve=o(dt),_t=u(dt,2),P=o(_t),ie=u(_t,2);let tt;var nt=u(ie,2);{var Ge=Se=>{var De=Vi(),Wt=o(De);C(()=>m(Wt,i(K).work_title)),g(Se,De)};k(nt,Se=>{i(K).has_work&&i(K).work_title&&Se(Ge)})}var jt=u(nt,2);{var At=Se=>{var De=Gi(),Wt=o(De);C(()=>m(Wt,i(K).unread_mail)),g(Se,De)};k(jt,Se=>{i(K).unread_mail>0&&Se(At)})}C((Se,De)=>{ut=le(Be,1,"agent-row clickable svelte-1n46o8q",null,ut,{selected:i(v)===i(K).address}),Ut(dt,`color: ${Se??""}`),m(Ve,De),m(P,i(K).name),tt=le(ie,1,"status-dot svelte-1n46o8q",null,tt,{running:i(K).running,working:i(K).has_work})},[()=>Ln(i(K).role),()=>Fn(i(K).role)]),oe("click",Be,()=>ls(i(K).address)),g(et,Be)}),g(S,G)};k(Ee,S=>{i(O).agents&&i(O).agents.length>0&&S(Me)})}C(()=>{m(L,i(O).name),m(He,i(O).path),m(H,`${i(O).polecat_count??""} polecats`),m(ae,`${i(O).crew_count??""} crews`)}),g(V,X)}),C(()=>{m(pe,i(n).summary.rig_count),m(Ft,i(n).summary.polecat_count),m(Je,i(n).summary.crew_count),m(qe,i(n).summary.active_hooks)}),g($e,Pt)};k(be,$e=>{i(n)&&$e(We)},!0)}g(Ke,ct)};k(je,Ke=>{i(c)?Ke(lt):Ke(vn,!1)},!0)}g(se,we)};k(N,se=>{i(a)?se(U):se(ne,!1)})}g(_,b)},Lr=_=>{var b=$t(),N=pt(b);{var U=ne=>{var se=io(),we=o(se);let je;var lt=o(we),vn=u(o(lt),2),Ke=u(lt,2);{var ct=J=>{var pe=Xi();g(J,pe)},be=J=>{var pe=$t(),vt=pt(pe);{var kt=ue=>{var Re=Zi(),Je=o(Re),Xe=o(Je),Ze=u(Je,2);C(()=>m(Xe,`‚ö†Ô∏è ${i(F)??""}`)),oe("click",Ze,Jt),g(ue,Re)},Ft=ue=>{var Re=$t(),Je=pt(Re);{var Xe=qe=>{var Ie=Qi();g(qe,Ie)},Ze=qe=>{var Ie=no();mt(Ie,5,()=>i(h),ht,(Et,Y)=>{var Ue=to();let Qe;var St=o(Ue),ft=o(St),Lt=o(ft),V=u(ft,2),O=o(V),X=u(St,2),Z=o(X);{var T=re=>{var xe=eo();g(re,xe)};k(Z,re=>{i(Y).pinned&&re(T)})}var L=u(Z,2),z=o(L),Q=u(X,2),he=o(Q);C((re,xe,ke)=>{Qe=le(Ue,1,"mail-item svelte-1n46o8q",null,Qe,{unread:!i(Y).read,selected:i(D)?.id===i(Y).id}),m(Lt,i(Y).from),m(O,re),le(L,1,xe,"svelte-1n46o8q"),m(z,i(Y).subject),m(he,`${ke??""}${i(Y).body.length>80?"...":""}`)},[()=>jn(i(Y).timestamp),()=>si(vs(i(Y).priority)),()=>i(Y).body.slice(0,80)]),oe("click",Ue,()=>yr(i(Y))),g(Et,Ue)}),g(qe,Ie)};k(Je,qe=>{i(h).length===0?qe(Xe):qe(Ze,!1)},!0)}g(ue,Re)};k(vt,ue=>{i(F)?ue(kt):ue(Ft,!1)},!0)}g(J,pe)};k(Ke,J=>{i(j)&&i(h).length===0?J(ct):J(be,!1)})}var We=u(we,2);let $e;var Pt=o(We);{var xt=J=>{var pe=ro(),vt=pt(pe),kt=o(vt),Ft=u(kt,2),ue=o(Ft),Re=o(ue),Je=u(ue,2),Xe=o(Je),Ze=u(vt,2),qe=o(Ze),Ie=o(qe),Et=u(qe,2),Y=o(Et),Ue=u(o(Y)),Qe=u(Y,2),St=u(o(Qe)),ft=u(Qe,2),Lt=u(o(ft)),V=u(ft,2);{var O=L=>{var z=so(),Q=u(o(z));C(he=>m(Q,` ${he??""}`),[()=>i(D).cc.join(", ")]),g(L,z)};k(V,L=>{i(D).cc&&i(D).cc.length>0&&L(O)})}var X=u(Et,2),Z=o(X),T=o(Z);C((L,z)=>{le(ue,1,`badge ${L??""}`,"svelte-1n46o8q"),m(Re,i(D).priority),m(Xe,i(D).type),m(Ie,i(D).subject),m(Ue,` ${i(D).from??""}`),m(St,` ${i(D).to??""}`),m(Lt,` ${z??""}`),m(T,i(D).body)},[()=>vs(i(D).priority),()=>new Date(i(D).timestamp).toLocaleString()]),oe("click",kt,()=>x(D,null)),g(J,pe)},Xt=J=>{var pe=ao();g(J,pe)};k(Pt,J=>{i(D)?J(xt):J(Xt,!1)})}C(()=>{je=le(we,1,"mail-list-panel svelte-1n46o8q",null,je,{"has-selected":i(D)}),$e=le(We,1,"mail-detail svelte-1n46o8q",null,$e,{visible:i(D)})}),oe("click",vn,Jt),g(ne,se)};k(N,ne=>{i(p)==="mail"&&ne(U)},!0)}g(_,b)};k(Pr,_=>{i(p)==="dashboard"?_(Fr):_(Lr,!1)})}var jr=u(ys,2);{var Wr=_=>{var b=qo(),N=o(b),U=u(o(N),2),ne=u(N,2);{var se=je=>{var lt=oo();g(je,lt)},we=je=>{var lt=$t(),vn=pt(lt);{var Ke=be=>{var We=wo(),$e=o(We),Pt=o($e),xt=o(Pt),Xt=o(xt),J=u(xt,2),pe=o(J),vt=o(pe),kt=u(pe,2),Ft=o(kt),ue=u(Pt,2),Re=o(ue),Je=u(o(Re),2),Xe=o(Je);let Ze;var qe=u(Xe),Ie=u(Re,2),Et=u(o(Ie),2),Y=o(Et),Ue=u(Ie,2),Qe=u(o(Ue),2),St=o(Qe),ft=u(Ue,2);{var Lt=E=>{var R=lo(),H=u(o(R),2),I=o(H);C(()=>m(I,i(d).agent.state)),g(E,R)};k(ft,E=>{i(d).agent.state&&E(Lt)})}var V=u($e,2);{var O=E=>{var R=vo(),H=u(o(R),2),I=o(H),ae=o(I),Ee=u(I,2);{var Me=S=>{var G=co(),et=o(G);C(()=>m(et,i(d).agent.work_title)),g(S,G)};k(Ee,S=>{i(d).agent.work_title&&S(Me)})}C(()=>m(ae,i(d).agent.hook_bead)),g(E,R)};k(V,E=>{i(d).agent.has_work&&E(O)})}var X=u(V,2),Z=o(X),T=u(o(Z));{var L=E=>{var R=fo(),H=o(R);C(()=>m(H,`${i(d).total_unread??""} unread`)),g(E,R)};k(T,E=>{i(d).total_unread>0&&E(L)})}var z=u(Z,2);{var Q=E=>{var R=_o();mt(R,5,()=>i(d).mail,ht,(H,I)=>{var ae=uo();let Ee;var Me=o(ae),S=o(Me),G=o(S),et=u(S,2),K=o(et),Be=u(Me,2),ut=o(Be);C((dt,Ve)=>{Ee=le(ae,1,"panel-mail-item svelte-1n46o8q",null,Ee,{unread:!i(I).read}),m(G,i(I).from),m(K,dt),Ut(Be,`color: ${Ve??""}`),m(ut,i(I).subject)},[()=>jn(i(I).timestamp),()=>Er(i(I).priority)]),g(H,ae)}),g(E,R)},he=E=>{var R=po();g(E,R)};k(z,E=>{i(d).mail&&i(d).mail.length>0?E(Q):E(he,!1)})}var re=u(X,2),xe=u(o(re),2);{var ke=E=>{var R=go();mt(R,5,()=>i(d).recent_events,ht,(H,I)=>{var ae=mo(),Ee=o(ae),Me=o(Ee),S=u(Ee,2),G=o(S),et=o(G),K=u(G,2);{var Be=Ve=>{var _t=ho(),P=o(_t);C(()=>m(P,i(I).context)),g(Ve,_t)};k(K,Ve=>{i(I).context&&Ve(Be)})}var ut=u(S,2),dt=o(ut);C((Ve,_t)=>{m(Me,Ve),m(et,i(I).type),m(dt,_t)},[()=>kr(i(I).type),()=>jn(i(I).timestamp)]),g(H,ae)}),g(E,R)},He=E=>{var R=yo();g(E,R)};k(xe,E=>{i(d).recent_events&&i(d).recent_events.length>0?E(ke):E(He,!1)})}C((E,R)=>{Ut(xt,`color: ${E??""}`),m(Xt,R),m(vt,i(d).agent.name),m(Ft,i(d).agent.address),Ze=le(Xe,1,"status-dot svelte-1n46o8q",null,Ze,{running:i(d).agent.running,stopped:!i(d).agent.running}),m(qe,` ${i(d).agent.running?"Running":"Stopped"}`),m(Y,i(d).agent.role),m(St,i(d).agent.session)},[()=>Ln(i(d).agent.role),()=>Fn(i(d).agent.role)]),g(be,We)},ct=be=>{var We=bo();g(be,We)};k(vn,be=>{i(d)?be(Ke):be(ct,!1)},!0)}g(je,lt)};k(ne,je=>{i(y)?je(se):je(we,!1)})}oe("click",U,mr),g(_,b)};k(jr,_=>{i(v)&&i(p)==="dashboard"&&_(Wr)})}C(()=>{fs=le(Wn,1,"app svelte-1n46o8q",null,fs,{"has-panel":i(v)}),_s=le($n,1,"nav-tab svelte-1n46o8q",null,_s,{active:i(p)==="dashboard"}),ps=le(Un,1,"nav-tab svelte-1n46o8q",null,ps,{active:i(p)==="mail"}),ms=le(En,1,"ws-status svelte-1n46o8q",null,ms,{connected:i(l)}),li(En,"title",i(l)?"Live updates active":"Reconnecting..."),m(Ir,` ${i(l)?"Live":"Offline"}`)}),oe("click",$n,()=>x(p,"dashboard")),oe("click",Un,()=>{x(p,"mail"),Jt()}),oe("click",gs,Ce),g(e,Wn),$s()}Ka(ko,{target:document.getElementById("app")});
